<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>虚拟现实主流操作系统 - XR未来视界</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/os.css">

    <!-- 2025年10月15日 样式改版 写入了内部 -->
    <style>
        .comparison-table {
            width: 85%;
            margin: 0 auto;
        }

        .os-title-img {
            width: 50%;
            height: 6rem;
            display: block;
            margin: 2rem auto;
        }

        .intro-img {
            width: 90%;
            margin: 0 auto;
            display: block;
            margin-bottom: 4rem;
        }

        .vr-img {
            width: 90%;
            margin: 0 auto;
            display: block;
        }

        .ar-img {
            width: 90%;
            margin: 0 auto;
            display: block;
        }

        .vr-desc {
            width: 90%;
            margin: 0 auto;
            display: block;
            font-size: 1.5rem;
            font-weight: 600;
            color: #bebcbc;
            text-align: center;
            margin-bottom: 3rem;
            margin-top: 1rem;
            letter-spacing: 1px;
        }

        .ar-desc {
            width: 90%;
            margin: 0 auto;
            display: block;
            font-size: 1.5rem;
            font-weight: 600;
            color: #bebcbc;
            text-align: center;
            margin-bottom: 2rem;
            letter-spacing: 1px;
            margin-bottom: 3rem;
            margin-top: 1rem;
        }
    </style>
</head>

<body>
    <!-- 侧边菜单 -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-cube"></i> XR视界</h3>
            <button class="close-btn" onclick="closeSidebar()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <ul class="nav-links">
            <li><a href="../index.html"><i class="fas fa-home"></i> 首页</a></li>
            <li><a href="basics.html"><i class="fas fa-lightbulb"></i> 基础概念介绍</a></li>
            <li><a href="os.html" class="active"><i class="fas fa-desktop"></i> 虚拟现实主流操作系统</a></li>
            <li><a href="engines.html"><i class="fas fa-cogs"></i> 内容开发引擎展示</a></li>
            <li><a href="modeling.html"><i class="fas fa-cube"></i> 建模与渲染工具展示</a></li>
            <li><a href="business.html"><i class="fas fa-chart-bar"></i> 业务运营平台软件展示</a></li>
            <li><a href="local.html"><i class="fas fa-building"></i> 本地优秀软件企业展示</a></li>
            <li><a href="sdk.html"><i class="fas fa-code"></i> 开发平台SDK</a></li>
            <li><a href="open-source.html"><i class="fas fa-code-branch"></i> 虚拟现实开源平台介绍</a></li>
            <li><a href="ecosystem.html"><i class="fas fa-leaf"></i> 内容生态平台介绍</a></li>
            <li><a href="policy.html"><i class="fas fa-landmark"></i> 虚拟现实国内外政策展示</a></li>
            <li><a href="ai.html"><i class="fas fa-robot"></i> AI赋能虚拟现实软件</a></li>
            <li><a href="applications.html"><i class="fas fa-rocket"></i> 行业应用与场景案例</a></li>
            <li><a href="history.html"><i class="fas fa-history"></i> VR行业发展过程</a></li>
        </ul>
    </nav>

    <!-- 主内容区域 -->
    <main class="main-content">
        <!-- 顶部栏 -->
        <header class="top-bar">
            <button class="menu-btn" onclick="openSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <h1>虚拟现实主流操作系统</h1>
        </header>


        <!-- 页面头号大标题 -->
        <img src="../images/new-1014/title.png" alt="" class="os-title-img">

        <!-- 标签切换：概述 / 对比 -->
        <div class="tabs" role="tablist">
            <button class="tab-btn active" role="tab" aria-selected="true" data-target="#overview-section"></button>
            <button class="tab-btn" role="tab" aria-selected="false" data-target="#compare-section"></button>
        </div>

        <!-- 基础概念介绍 -->
        <section id="overview-section" class="content-section tab-panel">
            <img src="../images/new-1014/intro.png" alt="" class="intro-img">

            <!-- vr 图 -->
            <img src="../images/new-1014/vr.png" alt="" class="vr-img">
            <span class="vr-desc">
                VR界面操作系统:实现虚拟现实交互与场景管理的沉漫式三维操作平台
            </span>

            <!-- VR 动态内容容器 -->
            <ul id="vr-systems-list" class="systems-list"></ul>

            <!-- ar 图 -->
            <img src="../images/new-1014/ar.png" alt="" class="ar-img">
            <span class="ar-desc">
                AR界面操作系统:支持增强现实交互与空间计算的沉漫式人机操作平台
            </span>

            <!-- AR 动态内容容器 -->
            <ul id="ar-systems-list" class="systems-list"></ul>
        </section>

        <!-- 系统对比表格 -->
        <section id="compare-section" class="content-section tab-panel" hidden>


            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>厂商/系统</th>
                            <th>技术架构</th>
                            <th>核心优势</th>
                            <th>生态策略</th>
                            <th>代表产品</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 动态渲染：来自 /api/v1/os 的 comparison -->
                    </tbody>
                </table>
            </div>
        </section>




    </main>

    <script>
        function openSidebar() {
            document.getElementById('sidebar').classList.add('active');
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('active');
        }

        // 标签切换逻辑
        (function () {
            const tabs = document.querySelectorAll('.tabs .tab-btn');
            const panels = document.querySelectorAll('.tab-panel');
            const overview = document.getElementById('overview-section');
            const compare = document.getElementById('compare-section');

            function activate(targetSelector) {
                panels.forEach(p => p.setAttribute('hidden', ''));
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.setAttribute('aria-selected', 'false');
                });
                const panel = document.querySelector(targetSelector);
                if (panel) panel.removeAttribute('hidden');
                const activeTab = Array.from(tabs).find(t => t.getAttribute('data-target') === targetSelector);
                if (activeTab) {
                    activeTab.classList.add('active');
                    activeTab.setAttribute('aria-selected', 'true');
                }

                // 切换body背景色：对比表格时使用深色背景
                if (targetSelector === '#compare-section') {
                    document.body.style.backgroundImage = 'none'
                    document.body.style.backgroundColor = '#1a1a1a';

                    document.body.style.transition = 'background-color 0.3s ease';
                } else {
                    document.body.style.backgroundImage = 'url(../images/new-1014/bg1.png)'
                    document.body.style.backgroundColor = '';
                    document.body.style.transition = 'background-color 0.3s ease';
                }

                equalizeHeights();
            }

            function getSelectorFromHash() {
                const h = (location.hash || '').toLowerCase();
                if (h === '#compare') return '#compare-section';
                return '#overview-section';
            }

            tabs.forEach(btn => {
                btn.addEventListener('click', () => {
                    const target = btn.getAttribute('data-target');
                    // 同步到 URL hash
                    const hash = target === '#compare-section' ? '#compare' : '#overview';
                    if (location.hash !== hash) location.hash = hash; else activate(target);
                });
            });

            // 初始状态：根据 hash 激活
            activate(getSelectorFromHash());

            // 监听 hash 变化
            window.addEventListener('hashchange', () => {
                activate(getSelectorFromHash());
            });

            // 面板高度对齐：测量两个面板的自然高度并统一min-height
            function measureHeight(el) {
                const wasHidden = el.hasAttribute('hidden');
                let prev = {};
                if (wasHidden) {
                    // 暂时显示但不影响布局
                    prev = {
                        position: el.style.position,
                        visibility: el.style.visibility,
                        pointerEvents: el.style.pointerEvents,
                        left: el.style.left,
                        width: el.style.width
                    };
                    el.removeAttribute('hidden');
                    el.style.position = 'absolute';
                    el.style.visibility = 'hidden';
                    el.style.pointerEvents = 'none';
                    el.style.left = '-9999px';
                    el.style.width = '100%';
                }
                const h = el.scrollHeight;
                if (wasHidden) {
                    el.setAttribute('hidden', '');
                    el.style.position = prev.position || '';
                    el.style.visibility = prev.visibility || '';
                    el.style.pointerEvents = prev.pointerEvents || '';
                    el.style.left = prev.left || '';
                    el.style.width = prev.width || '';
                }
                return h;
            }

            function equalizeHeights() {
                if (!overview || !compare) return;
                const h1 = measureHeight(overview);
                const h2 = measureHeight(compare);
                // 基线高度：提升全面对比的整体显示高度（同时保证两者等高）
                const baseline = window.innerWidth >= 1200 ? 1000 : (window.innerWidth >= 768 ? 850 : 700);
                const maxH = Math.max(h1, h2, baseline);
                overview.style.minHeight = maxH + 'px';
                compare.style.minHeight = maxH + 'px';
            }

            // 窗口尺寸变化时重新计算，使用防抖
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(equalizeHeights, 150);
            });
            // 首次计算（确保字体加载后再执行一次）
            window.addEventListener('load', () => setTimeout(equalizeHeights, 0));
        })();
    </script>
    <script src="../js/apiClient.js"></script>
    <script src="../js/render-utils.js"></script>
    <script src="../js/os.js"></script>
</body>

</html>